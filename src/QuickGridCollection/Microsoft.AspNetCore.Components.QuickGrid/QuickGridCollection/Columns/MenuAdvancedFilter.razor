@using Microsoft.AspNetCore.Components.Rendering;
@using Microsoft.AspNetCore.Components.Web
@using System.Linq.Expressions;
@using Microsoft.AspNetCore.Components.QuickGrid.QuickGridCollection.Infrastructure;
@using Microsoft.AspNetCore.Components.QuickGrid.QuickGridCollection.GridCss;

@namespace Microsoft.AspNetCore.Components.QuickGrid.QuickGridCollection.Columns
@typeparam TGridItem
@inherits MenuFiltre<TGridItem>

@RenderFragment

@code {

    protected sealed override void OptionRender(RenderTreeBuilder __builder, int index)
    {
        this.filterIndex = index;

        <div class="@ClassAndStyle[ClassHtml.MenuAdvancedFilter_div]" style="@ClassAndStyle[StyleCss.MenuAdvancedFilter_div]">

            @if (index < maxColumnFilters - 1)
            {
                bool disabled = !showAddFilterButton[index];

                <button class="@ClassAndStyle[ClassHtml.MenuAdvancedFilter_div_button_Operator]"
                        style="@ClassAndStyle[StyleCss.MenuAdvancedFilter_div_button_Operator]"
                        @onclick="ToggleFilterOperator">
                    @if (filterOperator == FilterOperator.And)
                    {
                        <strong>And</strong> <text> -> Or</text>
                    }
                    else if (filterOperator == FilterOperator.Or)
                    {
                        <strong>Or</strong> <text> -> And</text>
                    }
                </button>
                <button class="@ClassAndStyle[ClassHtml.MenuAdvancedFilter_div_button_Add]"
                        style="@ClassAndStyle[StyleCss.MenuAdvancedFilter_div_button_Add]"
                        disabled="@disabled" @onclick="AddColumnFilter">
                    ADD
                </button>
            }
        </div>
    }

}
